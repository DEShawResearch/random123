<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Uniform distribution scalar conversion functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<div class="tabs"><ul class="tablist"><li style="padding-left: 1.5em; font-weight: bold">Random123  Documentation</li></ul></div>
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Uniform distribution scalar conversion functions</div>  </div>
</div><!--header-->
<div class="contents">

<p>This file provides some simple functions that can be used to convert integers of various widths to floats and doubles with various characteristics. It can be used to generate real-valued, uniformly distributed random variables from the random integers produced by the Random123 CBRNGs.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gab8ce2e19dd9fafecdddf967be9ebd370"><td class="memTemplParams" colspan="2">template&lt;typename Ftype , typename Itype &gt; </td></tr>
<tr class="memitem:gab8ce2e19dd9fafecdddf967be9ebd370"><td class="memTemplItemLeft" align="right" valign="top">static Ftype&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__uniform.html#gab8ce2e19dd9fafecdddf967be9ebd370">r123::u01</a> (Itype in)</td></tr>
<tr class="memdesc:gab8ce2e19dd9fafecdddf967be9ebd370"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a uniform real value in (0, 1].  <a href="group__uniform.html#gab8ce2e19dd9fafecdddf967be9ebd370">More...</a><br /></td></tr>
<tr class="separator:gab8ce2e19dd9fafecdddf967be9ebd370"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8b1a6e0dec16b9f5df64cd792d1e243d"><td class="memTemplParams" colspan="2">template&lt;typename Ftype , typename Itype &gt; </td></tr>
<tr class="memitem:ga8b1a6e0dec16b9f5df64cd792d1e243d"><td class="memTemplItemLeft" align="right" valign="top">static Ftype&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__uniform.html#ga8b1a6e0dec16b9f5df64cd792d1e243d">r123::uneg11</a> (Itype in)</td></tr>
<tr class="memdesc:ga8b1a6e0dec16b9f5df64cd792d1e243d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a signed value in [-1,1].  <a href="group__uniform.html#ga8b1a6e0dec16b9f5df64cd792d1e243d">More...</a><br /></td></tr>
<tr class="separator:ga8b1a6e0dec16b9f5df64cd792d1e243d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3327be1f0ee30ad87c5c9cedb9405a66"><td class="memTemplParams" colspan="2">template&lt;typename Ftype , typename Itype &gt; </td></tr>
<tr class="memitem:ga3327be1f0ee30ad87c5c9cedb9405a66"><td class="memTemplItemLeft" align="right" valign="top">static Ftype&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__uniform.html#ga3327be1f0ee30ad87c5c9cedb9405a66">r123::u01fixedpt</a> (Itype in)</td></tr>
<tr class="memdesc:ga3327be1f0ee30ad87c5c9cedb9405a66"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a value in (0,1) chosen from a set of equally spaced fixed-point values.  <a href="group__uniform.html#ga3327be1f0ee30ad87c5c9cedb9405a66">More...</a><br /></td></tr>
<tr class="separator:ga3327be1f0ee30ad87c5c9cedb9405a66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga46ec5cf8c48927fb89a1edbf28bdc938"><td class="memTemplParams" colspan="2">template&lt;typename Ftype , typename CollType &gt; </td></tr>
<tr class="memitem:ga46ec5cf8c48927fb89a1edbf28bdc938"><td class="memTemplItemLeft" align="right" valign="top">static std::array&lt; Ftype, CollType::static_size &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__uniform.html#ga46ec5cf8c48927fb89a1edbf28bdc938">r123::u01all</a> (CollType in)</td></tr>
<tr class="memdesc:ga46ec5cf8c48927fb89a1edbf28bdc938"><td class="mdescLeft">&#160;</td><td class="mdescRight">Apply u01 to every item in an r123array, returning a std::array.  <a href="group__uniform.html#ga46ec5cf8c48927fb89a1edbf28bdc938">More...</a><br /></td></tr>
<tr class="separator:ga46ec5cf8c48927fb89a1edbf28bdc938"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga96a619643a4cfb6028ccd04641361e77"><td class="memTemplParams" colspan="2">template&lt;typename Ftype , typename CollType &gt; </td></tr>
<tr class="memitem:ga96a619643a4cfb6028ccd04641361e77"><td class="memTemplItemLeft" align="right" valign="top">static std::array&lt; Ftype, CollType::static_size &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__uniform.html#ga96a619643a4cfb6028ccd04641361e77">r123::uneg11all</a> (CollType in)</td></tr>
<tr class="memdesc:ga96a619643a4cfb6028ccd04641361e77"><td class="mdescLeft">&#160;</td><td class="mdescRight">Apply uneg11 to every item in an r123array, returning a std::array.  <a href="group__uniform.html#ga96a619643a4cfb6028ccd04641361e77">More...</a><br /></td></tr>
<tr class="separator:ga96a619643a4cfb6028ccd04641361e77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafe8ef930d30e944a0b6bf584a49c1502"><td class="memTemplParams" colspan="2">template&lt;typename Ftype , typename CollType &gt; </td></tr>
<tr class="memitem:gafe8ef930d30e944a0b6bf584a49c1502"><td class="memTemplItemLeft" align="right" valign="top">static std::array&lt; Ftype, CollType::static_size &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__uniform.html#gafe8ef930d30e944a0b6bf584a49c1502">r123::u01fixedptall</a> (CollType in)</td></tr>
<tr class="memdesc:gafe8ef930d30e944a0b6bf584a49c1502"><td class="mdescLeft">&#160;</td><td class="mdescRight">Apply u01fixedpt to every item in an r123array, returning a std::array.  <a href="group__uniform.html#gafe8ef930d30e944a0b6bf584a49c1502">More...</a><br /></td></tr>
<tr class="separator:gafe8ef930d30e944a0b6bf584a49c1502"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This file provides some simple functions that can be used to convert integers of various widths to floats and doubles with various characteristics. It can be used to generate real-valued, uniformly distributed random variables from the random integers produced by the Random123 CBRNGs. </p>
<p>There are three templated functions:</p>
<ul>
<li>u01: output is as dense as possible in (0,1}, never 0.0. May return 1.0 if and only if the number of output mantissa bits is less than the width of the input.</li>
<li>uneg11: output is as dense as possible in {-1,1}, never 0.0. May return 1.0 or -1.0 if and only if the number of output mantissa bits is less than the width of the input.</li>
<li>u01fixedpt: output is "fixed point", equispaced, open at both ends, and is never 0.0, 0.5 nor 1.0.</li>
</ul>
<p>The behavior of u01 and uneg11 depend on the pre-processor symbol: R123_UNIFORM_FLOAT_STORE. When defined to a non-zero value, u01 and uneg11 declare a volatile intermediate result, with the intention of forcing architectures that have "extra bits" in their floating point registers to more closely conform to IEEE arithmetic. When compiled this way, u01 and uneg11 will be significantly slower, as they will incur a memory write and read on every call. Without it, they may fail the "known answer test" implemented in ut_uniform_IEEEkat.cpp even though they perform perfectly reasonable int to float conversions. We have used this option to get 32-bit x86 to produce the same results as 64-bit x86-64 code, but we do not recommend it for normal use.</p>
<p>Three additional functions are defined when C++11 or newer is in use:</p>
<ul>
<li>u01all</li>
<li>uneg11all</li>
<li>u01fixedptall</li>
</ul>
<p>These functions apply the corresponding conversion to every element of their argument, which must be a staticly sized array, e.g., an r123array or a std::array of an integer type.</p>
<p>This file may not be as portable, and has not been tested as rigorously as other files in the library, e.g., the generators. Nevertheless, we hope it is useful and we encourage developers to copy it and modify it for their own use. We invite comments and improvements. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="gab8ce2e19dd9fafecdddf967be9ebd370"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab8ce2e19dd9fafecdddf967be9ebd370">&#9670;&nbsp;</a></span>u01()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Ftype , typename Itype &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static Ftype r123::u01 </td>
          <td>(</td>
          <td class="paramtype">Itype&#160;</td>
          <td class="paramname"><em>in</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return a uniform real value in (0, 1]. </p>
<p>Input is a W-bit integer (signed or unsigned). It is cast to a W-bit unsigned integer, multiplied by Ftype(2^-W) and added to Ftype(2^(-W-1)). A good compiler should optimize it down to an int-to-float conversion followed by a multiply and an add, which might be fused, depending on the architecture.</p>
<p>If the input is a uniformly distributed integer, and if Ftype arithmetic follows IEEE754 round-to-nearest rules, then the result is a uniformly distributed floating point number in (0, 1].</p>
<ul>
<li>The result is never exactly 0.0.</li>
<li>The smallest value returned is 2^-(W-1).</li>
<li>Let M be the number of mantissa bits in Ftype (typically 24 or 53).<ul>
<li>If W&gt;M then the largest value retured is 1.0.</li>
<li>If W&lt;=M then the largest value returned is Ftype(1.0 - 2^(-W-1)). </li>
</ul>
</li>
</ul>

</div>
</div>
<a id="ga46ec5cf8c48927fb89a1edbf28bdc938"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga46ec5cf8c48927fb89a1edbf28bdc938">&#9670;&nbsp;</a></span>u01all()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Ftype , typename CollType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static std::array&lt;Ftype, CollType::static_size&gt; r123::u01all </td>
          <td>(</td>
          <td class="paramtype">CollType&#160;</td>
          <td class="paramname"><em>in</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Apply u01 to every item in an r123array, returning a std::array. </p>
<p>Only in C++11 and newer. The argument type may be any integer collection with a constexpr static_size member, e.g., an r123array or a std::array of an integer type. </p>

</div>
</div>
<a id="ga3327be1f0ee30ad87c5c9cedb9405a66"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3327be1f0ee30ad87c5c9cedb9405a66">&#9670;&nbsp;</a></span>u01fixedpt()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Ftype , typename Itype &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static Ftype r123::u01fixedpt </td>
          <td>(</td>
          <td class="paramtype">Itype&#160;</td>
          <td class="paramname"><em>in</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return a value in (0,1) chosen from a set of equally spaced fixed-point values. </p>
<p>Let:</p><ul>
<li>W = width of Itype, e.g., 32 or 64, regardless of signedness.</li>
<li>M = mantissa bits of Ftype, e.g., 24, 53 or 64</li>
<li>B = min(M, W)</li>
</ul>
<p>Then the 2^(B-1) possible output values are: 2^-B*{1, 3, 5, ..., 2^B - 1}</p>
<p>The smallest output is: 2^-B</p>
<p>The largest output is: 1 - 2^-B</p>
<p>The output is never exactly 0.0, nor 0.5, nor 1.0.</p>
<p>The 2^(B-1) possible outputs:</p><ul>
<li>are equally likely,</li>
<li>are uniformly spaced by 2^-(B-1),</li>
<li>are balanced around 0.5 </li>
</ul>

</div>
</div>
<a id="gafe8ef930d30e944a0b6bf584a49c1502"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafe8ef930d30e944a0b6bf584a49c1502">&#9670;&nbsp;</a></span>u01fixedptall()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Ftype , typename CollType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static std::array&lt;Ftype, CollType::static_size&gt; r123::u01fixedptall </td>
          <td>(</td>
          <td class="paramtype">CollType&#160;</td>
          <td class="paramname"><em>in</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Apply u01fixedpt to every item in an r123array, returning a std::array. </p>
<p>Only in C++11 and newer. The argument type may be any integer collection with a constexpr static_size member, e.g., an r123array or a std::array of an integer type. </p>

</div>
</div>
<a id="ga8b1a6e0dec16b9f5df64cd792d1e243d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8b1a6e0dec16b9f5df64cd792d1e243d">&#9670;&nbsp;</a></span>uneg11()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Ftype , typename Itype &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static Ftype r123::uneg11 </td>
          <td>(</td>
          <td class="paramtype">Itype&#160;</td>
          <td class="paramname"><em>in</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return a signed value in [-1,1]. </p>
<p>The argument is converted to a W-bit signed integer, multiplied by Ftype(2^-(W-1)) and then added to Ftype(2^-W). A good compiler should optimize it down to an int-to-float conversion followed by a multiply and an add, which might be fused, depending on the architecture.</p>
<p>If the input is a uniformly distributed integer, and if Ftype arithmetic follows IEEE754 round-to-nearest rules, then the output is a uniformly distributed floating point number in [-1, 1].</p>
<ul>
<li>The result is never exactly 0.0.</li>
<li>The smallest absolute value returned is 2^-W</li>
<li>Let M be the number of mantissa bits in Ftype.<ul>
<li>If W&gt;M then the largest value retured is 1.0 and the smallest is -1.0.</li>
<li>If W&lt;=M then the largest value returned is the Ftype(1.0 - 2^-W) and the smallest value returned is -Ftype(1.0 - 2^-W). </li>
</ul>
</li>
</ul>

</div>
</div>
<a id="ga96a619643a4cfb6028ccd04641361e77"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga96a619643a4cfb6028ccd04641361e77">&#9670;&nbsp;</a></span>uneg11all()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Ftype , typename CollType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static std::array&lt;Ftype, CollType::static_size&gt; r123::uneg11all </td>
          <td>(</td>
          <td class="paramtype">CollType&#160;</td>
          <td class="paramname"><em>in</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Apply uneg11 to every item in an r123array, returning a std::array. </p>
<p>Only in C++11 and newer. The argument type may be any integer collection with a constexpr static_size member, e.g., an r123array or a std::array of an integer type. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Jan 21 2021 04:00:00 for Random123 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
